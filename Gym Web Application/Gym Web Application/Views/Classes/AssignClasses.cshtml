@{
    ViewData["Title"] = "Assign Class";
}

@model Gym_Web_Application.Models.AssignedClassModel

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<div class="container-fluid pt-3">
    <div class="row removable">
        <div class="col-lg">
            <div class="user-form">
                <h1>@ViewData["Title"]</h1>
                <form class="add-user" method="POST">
                    <label for="class">Class</label>
                    <input class="add-user-input" type="text" name="className" id="className"
                        value="@ViewBag.ClassName" disabled>
                     <input type="hidden" name="ClassID" value="@ViewBag.ClassID">


                    <label for="coach">Coach</label>
                    <select class="add-user-input" name="CoachID" asp-for="CoachID">
                        @foreach (var employeeModel in ViewBag.Coaches)
                        {
                            <option value="@employeeModel.ID">@employeeModel.Name</option>
                        }
                    </select>
                    <span class="error-message" id="coachID-error"></span>
                    <hr>

                    <label for="start-time">Start Time</label>
                    <input class="add-user-input" type="time" name="startTime" id="" asp-for="StartTime">
                    <span class="error-message" id="startTime-error"></span>
                    <br>

                    <label for="end-time">End Time</label>
                    <input class="add-user-input" type="time" name="endTime" id="" asp-for="EndTime">
                    <span class="error-message" id="endTime-error"></span>
                    <br>
                    <hr>

                    <label for="free">Free</label>
                    <select class="add-user-input" id="free-select" onchange="togglePriceField()" name="IsFree" asp-for="IsFree">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                    <span class="error-message" id="isFree-error"></span>
                    <br>

                    <div id="price-field" style="display:none;">
                        <label for="price">Price</label>
                        <input class="add-user-input" type="number" name="price" id="price-input" placeholder="Price" asp-for="Price">
                        <span class="error-message" id="price-error"></span>
                    </div>
                    <br>

                    <label for="num-of-attendants">Number Of Attendants</label>
                    <input class="add-user-input" type="number" name="NumOfAttendants" id="" asp-for="NumOfAttendants">
                    <span class="error-message" id="numOfAttendants-error"></span>
                    <br>

                    <div id="classDayContainer">
                        <label for="class-day">Class Days</label>
                        <select class="add-user-input" id="classDayDropdown" name="Date">
                            @foreach (var classDay in ViewBag.ClassDays)
                            {
                                <option>@classDay.ToString("MM/dd/yyyy")</option>
                            }
                        </select>

                    </div>
                    <span class="error-message" id="classDay-error"></span>

                    <hr>
                    <br>

                    <button class="btn btn-add-form" type="submit">Assign Class</button>
                </form>
                <script>
                    function togglePriceField() {
                        var freeSelect = document.getElementById("free-select");
                        var priceInput = document.getElementById("price-input");

                        if (freeSelect.value === "yes") {
                            priceInput.value = "0";
                            priceInput.disabled = true;
                            priceInput.required = false;
                            priceInput.parentElement.style.display = "none";
                        } else {
                            priceInput.disabled = false;
                            priceInput.required = true;
                            priceInput.parentElement.style.display = "block";
                        }
                    }


                </script>
            </div>
        </div>
    </div>
</div>
<script src="~/js/assignClass.js"></script>
